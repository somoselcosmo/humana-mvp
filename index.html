<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Humana Digital - Plataforma JAC</title>
    <link rel="icon" type="image/png" href="./assets/img/logo.png">

    <!-- 1. ICONOS (Remix Icon) -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- 2. FUENTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@500;600;700&family=Orbitron:wght@600;700&display=swap" rel="stylesheet">

    <!-- 3. TUS ESTILOS NATIVOS (Sin Tailwind) -->
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/dashboard.css">

    <style>
        /* Utilidad única para la lógica de vistas */
        .hidden-view { display: none !important; }
    </style>
</head>

<body class="login-body">

    <!-- ================================================================= -->
    <!-- VISTA 1: LOGIN Y REGISTRO (ID: view-auth)                         -->
    <!-- ================================================================= -->
    <main id="view-auth" style="width: 100%;">
        <div class="login-frame">
            <div class="login-shell">
                
                <!-- HERO (Izquierda) -->
                <section class="login-hero">
                    <header class="hero-top">
                        <div class="hero-brand">
                            <img src="./assets/img/logo.png" alt="Humana Digital" class="hero-logo" loading="lazy">
                            <div class="brand__text">
                                <h1 class="brand__title">HUMANA</h1>
                                <h2 class="brand__subtitle" aria-label="DIGITAL">
                                    <span aria-hidden="true">D</span><span aria-hidden="true">I</span><span aria-hidden="true">G</span><span aria-hidden="true">I</span><span aria-hidden="true">T</span><span aria-hidden="true">A</span><span aria-hidden="true">L</span>
                                </h2>
                            </div>
                        </div>
                        <p class="hero-tag">Plataforma institucional para gestionar comunidades.</p>
                    </header>
                    <div class="hero-highlight">
                        <h1>Impulsa tu Junta con decisiones conectadas</h1>
                        <p>Coordina agendas, salones virtuales y documentación.</p>
                    </div>
                </section>

                <!-- PANEL (Derecha) -->
                <section class="login-panel">
                    <div class="panel-card">
                        <!-- Login Form -->
                        <div id="form-box-login">
                            <div class="panel-chip">Ingreso Humana</div>
                            <h2>Accede a tu espacio</h2>
                            <p class="panel-subtitle">Usa tu correo institucional.</p>
                            <form class="panel-form" id="form-login">
                                <label class="form-field">
                                    <span>Correo electrónico</span>
                                    <input type="email" id="login-email" required>
                                </label>
                                <label class="form-field">
                                    <span>Contraseña</span>
                                    <input type="password" id="login-pass" required>
                                </label>
                                <button type="submit" class="form-submit">Iniciar sesión</button>
                                <div class="form-divider"><span>o</span></div>
                                <button type="button" class="form-submit secondary-btn" id="btn-ir-registro">
                                    Crear cuenta de Vecino
                                </button>
                            </form>
                        </div>

                        <!-- Register Form -->
                        <div id="form-box-register" style="display: none;">
                            <div class="panel-chip">Registro Vecinal</div>
                            <h2>Únete a tu JAC</h2>
                            <form class="panel-form" id="form-register">
                                <label class="form-field"><span>Nombre</span><input type="text" id="reg-nombre" required></label>
                                <label class="form-field"><span>Email</span><input type="email" id="reg-email" required></label>
                                <label class="form-field"><span>Clave</span><input type="password" id="reg-pass" required></label>
                                <label class="form-field"><span>Teléfono</span><input type="tel" id="reg-phone" required></label>
                                <label class="form-field">
                                <span>Selecciona tu Comunidad</span>
                                    <!-- Le ponemos required para que sea obligatorio elegir una -->
                                    <select id="reg-jac" required style="cursor: pointer;">
                                        <option value="" disabled selected>-- Cargando Juntas... --</option>
                                    </select>
                                </label>
                                <button type="submit" class="form-submit">Registrarme</button>
                                <a href="#" id="btn-volver-login" style="text-align:center; display:block; margin-top:10px;">Volver</a>
                            </form>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- ================================================================= -->
    <!-- VISTA 2: DASHBOARD (ID: view-dashboard) - LIMPIO Y NATIVO         -->
    <!-- ================================================================= -->
    <div id="view-dashboard" class="hidden-view">
        
        <!-- HEADER (Estructura Flex Nativ) -->
        <header class="custom-header">
            <!-- Izquierda: Logo -->
            <div class="header-left">
                <img src="./assets/img/logo.png" alt="Logo" class="brand-logo">
                <div class="brand__text">
                    <h1 class="brand__title">HUMANA</h1>
                    <h2 class="brand__subtitle">
                        <span>D</span><span>I</span><span>G</span><span>I</span><span>T</span><span>A</span><span>L</span>
                    </h2>
                </div>
            </div>

            <!-- Derecha: Botones -->
            <div class="header-right">
                <button class="search-btn" type="button" aria-label="Buscar">
                    <i class="ri-search-line" style="font-size: 1.2rem;"></i>
                </button>
                <button id="btn-logout" class="logout-btn" title="Cerrar Sesión">
                    <i class="ri-logout-box-line" style="font-size: 1.2rem;"></i>
                </button>
            </div>
        </header>

        <!-- LAYOUT PRINCIPAL -->
        <main class="humana-main">
            
            <!-- SIDEBAR -->
            <aside class="humana-aside">
                <!-- Info Usuario -->
                <div class="aside-header">
                    <span class="aside-chip" id="user-role-display">ROL</span>
                    <span class="user-email" id="user-email-display">Cargando...</span>
                </div>

                <!-- Menú -->
                <nav class="menu-list">
                    <a href="#" class="menu-item active" data-target="home">
                        <span class="menu-icon"><i class="ri-home-5-line"></i></span>
                        <span>Inicio</span>
                    </a>
                    <a href="#" class="menu-item" data-target="directiva">
                        <span class="menu-icon"><i class="ri-vip-crown-line"></i></span>
                        <span>Directiva</span>
                    </a>
                    
                    <!-- MENÚ DESPLEGABLE DE LIBROS -->
<div class="menu-item-group">
    <!-- Botón Principal (Disparador) -->
    <div class="menu-item" id="btn-toggle-libros" style="cursor: pointer; justify-content: space-between;">
        <div style="display: flex; gap: 12px; align-items: center;">
            <span class="menu-icon"><i class="ri-book-shelf-line"></i></span>
            <span>Libros JAC</span>
        </div>
        <i class="ri-arrow-down-s-line" id="icon-arrow-libros" style="transition: transform 0.3s;"></i>
    </div>

    <!-- Submenú (Oculto por defecto) -->
    <div id="submenu-libros" style="display: none; flex-direction: column; gap: 5px; padding-left: 20px; margin-top: 5px; border-left: 1px solid var(--border-color);">
        
        <a href="#" class="menu-item" data-target="libro-actas" style="font-size: 0.9em;">
            <i class="ri-file-list-3-line"></i> Actas
        </a>
        <a href="#" class="menu-item" data-target="libro-afiliados" style="font-size: 0.9em;">
            <i class="ri-group-line"></i> Afiliados
        </a>
        <a href="#" class="menu-item" data-target="libro-contable" style="font-size: 0.9em;">
            <i class="ri-money-dollar-circle-line"></i> Contable
        </a>
        <a href="#" class="menu-item" data-target="libro-inventario" style="font-size: 0.9em;">
            <i class="ri-archive-line"></i> Inventario
        </a>
        <a href="#" class="menu-item" data-target="libro-convivencia" style="font-size: 0.9em;">
            <i class="ri-scales-line"></i> Convivencia
        </a>

    </div>
</div>

                    <a href="#" class="menu-item" data-target="bandeja">
                        <span class="menu-icon"><i class="ri-mail-line"></i></span>
                        <span>Bandeja</span>
                    </a>

                    <div class="aside-section-title">ADMINISTRACIÓN</div>
                    
                    <a href="#" class="menu-item" data-target="tramites">
                        <span class="menu-icon"><i class="ri-run-line"></i></span>
                        <span>Trámites</span>
                    </a>
                    <!-- tarjetas de estatutos y documentos -->
                     <a href="#" class="menu-item" data-target="estatutos">
                        <span class="menu-icon"><i class="ri-file-list-3-line"></i></span>
                        <span>Estatutos</span>
                     </a>
                        <a href="#" class="menu-item" data-target="documentos">
                            <span class="menu-icon"><i class="ri-folder-3-line"></i></span>
                            <span>Documentos</span>
                        </a>
                    <div class="aside-section-title">Tecnología avanzadas</div>
                    <!-- voto electrónico -->
                    <a href="#" class="menu-item" data-target="voto-electronico">
                        <span class="menu-icon"><i class="ri-checkbox-multiple-line"></i></span>
                        <span>Voto Electrónico</span>
                    </a>
                    <!-- Sala de conferencias -->
                    <a href="#" class="menu-item" data-target="sala-conferencias">
                        <span class="menu-icon"><i class="ri-video-line"></i></span>
                        <span>Sala de Conferencias</span>
                    </a>
                 <!-- UBI -->
                    <a href="#" class="menu-item" data-target="ubi">
                        <span class="menu-icon"><i class="ri-map-pin-line"></i></span>
                        <span>UBI</span>
                    </a>
                    <!-- Donación -->
                    <a href="#" class="menu-item" data-target="donacion">
                        <span class="menu-icon"><i class="ri-heart-line"></i></span>
                        <span>Donación</span>
                    </a>
                   <div class="aside-section-title">Privado</div>
                   <!-- proyectos -->
                    <a href="#" class="menu-item" data-target="proyectos">
                        <span class="menu-icon"><i class="ri-folder-4-line"></i></span>
                        <span>Proyectos</span>
                    </a>
                    <!-- Agenda / Calendario -->
                    <a href="#" class="menu-item" data-target="agenda">
                        <span class="menu-icon"><i class="ri-calendar-line"></i></span>
                        <span>Agenda</span>
                    </a>
                    <!-- Notas -->
                    <a href="#" class="menu-item" data-target="notas">
                        <span class="menu-icon"><i class="ri-notification-line"></i></span>
                        <span>Notas</span>
                    </a>
                </nav>
            </aside>
            
            <!-- CONTENIDO CENTRAL -->
            <!-- DENTRO DE TU <main class="humana-main"> -->
<section id="topContent" class="top-content">
    
    <!-- ========================================== -->
    <!-- VISTA A: INICIO / HOME (Lo que ya tenías)  -->
    <!-- ========================================== -->
    <div id="section-home">
        
        <!-- Tarjeta Superior -->
        <div class="portada">
            <div class="portada-info">
                <span class="aside-chip" style="margin-right: 8px;">HUMANA</span> Políticas Digitales
            </div>
            <div>
                <button class="btn-editar">EDITAR</button>
                <span class="cyber" style="margin-left: 10px; font-weight: bold;">LOGO JAC</span>
            </div>
        </div>

        <!-- Info Bar -->
        <div class="info-bar">
            <div>
                <div>UUID: <span id="jac-uuid">Cargando...</span></div>
                <div>DID: <b style="color: #fff;" id="jac-did">...</b></div>
            </div>
            <div style="text-align: right;">
                <div>NIT: <span id="jac-nit">...</span></div>
                <div id="jac-lugar">...</div>
            </div>
        </div>

        <!-- Hero Text -->
        <h1 class="hero-title" id="jac-nombre">Cargando JAC...</h1>
        <h2 class="hero-subtitle" id="jac-lema">...</h2>
        <p class="hero-desc" id="jac-desc">Cargando descripción...</p>

        <!-- Video -->
        <div class="video-wrapper">
            <div class="video-container">
                <iframe id="jac-video" src="" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>

    </div> <!-- FIN DE SECTION HOME -->


    <!-- ========================================== -->
    <!-- VISTA B: DIRECTIVA (Oculta por defecto)    -->
    <!-- ========================================== -->
    <div id="section-directiva" class="hidden-view">
    
        <header class="council-header">
            <div>
                <h1 id="dir-titulo">Gobierno JAC</h1>
                <p class="council-header__subtitle">Directiva, comités de trabajo y delegados</p>
            </div>
            <label class="council-select">
                <span>Vigencia</span>
                <select><option>2024-2028</option></select>
            </label>
        </header>
    
        <!-- TARJETAS PRINCIPALES -->
        <section class="council-panels">
            <!-- Tarjeta Presidente -->
            <article class="council-card">
                <div class="card-label">Junta Directiva Actual</div>
                <h3>Presidente(a)</h3>
                
                <div class="member-profile" id="card-presidente">
                    <div class="avatar-circle">--</div>
                    <div class="member-info">
                        <h3>Cargando...</h3>
                        <p>...</p>
                    </div>
                </div>
                <div style="margin-top:auto;">
                    <button class="btn-editar" style="background:var(--border-color);">Ver perfil →</button>
                </div>
            </article>
    
            <!-- Tarjeta Vicepresidente -->
            <article class="council-card">
                <div class="card-label">Vicepresidencia</div>
                <h3>Suplente Legal</h3>
                <div class="member-profile" id="card-vice">
                    <div class="avatar-circle">--</div>
                    <div class="member-info">
                        <h3>Vacante</h3>
                        <p>Sin asignar</p>
                    </div>
                </div>
            </article>
        </section>
    
        <!-- TABLA CONCILIADORES -->
        <section class="council-section">
            <header class="council-section__header">
                <div><h2>Equipo Directivo Completo</h2></div>
            </header>
            <div class="council-table">
                <table>
                    <thead>
                        <tr>
                            <th>Nombre</th><th>Rol</th><th>Estado</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-directiva-body">
                        <!-- Se llena con JS -->
                    </tbody>
                </table>
            </div>
        </section>
    
    </div> <!-- FIN DE SECTION DIRECTIVA -->
    <!-- VISTA C: VISOR DE LIBROS (Genérico) -->
<div id="section-libros" class="hidden-view">
    
    <header class="council-header">
        <div>
            <!-- Título dinámico (cambiará según el libro) -->
            <h1 id="libro-titulo">Libro JAC</h1>
            <p class="council-header__subtitle" id="libro-subtitulo">Registro oficial de la comunidad</p>
        </div>
        <div>
            <!-- Botón para agregar registros (Solo admins) -->
            <button class="search-btn" style="width:auto; padding:0 20px; gap:10px;">
                <i class="ri-add-line"></i> Nuevo Registro
            </button>
        </div>
    </header>

    <!-- TABLA GENÉRICA -->
    <section class="council-section">
        <div class="council-table">
            <table id="tabla-libros">
                <!-- El encabezado (thead) y cuerpo (tbody) se inyectan con JS -->
                <thead id="libro-thead"></thead>
                <tbody id="libro-tbody"></tbody>
            </table>
        </div>
    </section>

</div>


    <!-- FOOTER COMÚN -->
    <footer class="site-footer">
        <p>©2025 Humana Políticas Digitales. Todos los derechos reservados.</p>
    </footer>

</section>
        </main>
    </div>

    <!-- LÓGICA DE JAVASCRIPT -->
    <script type="module" src="js/firebase.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/app.js"></script>

</body>
</html>