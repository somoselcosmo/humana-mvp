<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Humana Digital - Plataforma JAC</title>
    <link rel="icon" type="image/png" href="./assets/img/logo.png">

    <!-- 1. ICONOS (Remix Icon) -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- 2. FUENTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@500;600;700&family=Orbitron:wght@600;700&display=swap" rel="stylesheet">

    <!-- 3. TUS ESTILOS NATIVOS (Sin Tailwind) -->
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/dashboard.css">

    <style>
        /* Utilidad única para la lógica de vistas */
        .hidden-view { display: none !important; }
    </style>
</head>

<body class="login-body">

    <!-- ================================================================= -->
    <!-- VISTA 1: LOGIN Y REGISTRO (ID: view-auth)                         -->
    <!-- ================================================================= -->
    <main id="view-auth" style="width: 100%;">
        <div class="login-frame">
            <div class="login-shell">
                
                <!-- HERO (Izquierda) -->
                <section class="login-hero">
                    
                    <!-- 1. CABECERA: MARCA -->
                    <header class="hero-top">
                        <div class="hero-brand">
                            <img src="./assets/img/logo.png" alt="Humana Digital" class="hero-logo" loading="lazy">
                            <div class="brand__text">
                                <h1 class="brand__title">HUMANA</h1>
                                <h2 class="brand__subtitle">
                                    <span>D</span><span>I</span><span>G</span><span>I</span><span>T</span><span>A</span><span>L</span>
                                </h2>
                            </div>
                        </div>
                        <div class="hero-badge">Plataforma Descentralizada v1.0</div>
                    </header>

                    <!-- 2. CONTENIDO CENTRAL: BENEFICIOS -->
                    <div class="hero-highlight">
                        <h1 class="highlight-title">Impulsa tu Junta con <br> <span class="text-cyber">decisiones conectadas</span></h1>
                        <p class="highlight-desc">Centraliza la gestión comunitaria, coordina agendas y asegura la transparencia en un solo lugar.</p>
                        
                        <!-- Lista de características con iconos -->
                        <ul class="hero-features">
                            <li>
                                <span class="feature-icon"><i class="ri-shield-check-line"></i></span>
                                <div>
                                    <strong>Votaciones Seguras</strong>
                                    <span class="feature-sub">Registro inmutable de decisiones.</span>
                                </div>
                            </li>
                            <li>
                                <span class="feature-icon"><i class="ri-folder-open-line"></i></span>
                                <div>
                                    <strong>Libros Digitales</strong>
                                    <span class="feature-sub">Actas y afiliados siempre a mano.</span>
                                </div>
                            </li>
                            <li>
                                <span class="feature-icon"><i class="ri-global-line"></i></span>
                                <div>
                                    <strong>Conexión Nacional</strong>
                                    <span class="feature-sub">Articulación con entidades públicas.</span>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- 3. FOOTER: ESTADO DEL SISTEMA -->
                    <footer class="hero-footer">
                        <div class="system-status">
                            <span class="status-dot"></span>
                            <span>Sistemas Operativos</span>
                        </div>
                        <div class="hero-copyright">© 2025 Humana Digitales</div>
                    </footer>

                </section>

                <!-- PANEL (Derecha) -->
                <section class="login-panel">
                    <div class="panel-card">
                        <!-- Login Form -->
                        <div id="form-box-login">
                            <div class="panel-chip">Ingreso Humana</div>
                            <h2>Accede a tu espacio</h2>
                            <p class="panel-subtitle">Usa tu correo institucional.</p>
                            <form class="panel-form" id="form-login">
                                <label class="form-field">
                                    <span>Correo electrónico</span>
                                    <input type="email" id="login-email" required>
                                </label>
                                <label class="form-field">
                                    <span>Contraseña</span>
                                    <input type="password" id="login-pass" required>
                                </label>
                                <button type="submit" class="form-submit">Iniciar sesión</button>
                                <div class="form-divider"><span>o</span></div>
                                <button type="button" class="form-submit secondary-btn" id="btn-ir-registro">
                                    Crear cuenta de Vecino
                                </button>
                            </form>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
    <!-- VISTA 3: PANTALLA DE PENDIENTE (SALA DE ESPERA) -->
    <div id="view-pending" class="hidden-view" style="width: 100%; min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #0b0f13; color: white; text-align: center;">
        <div style="max-width: 400px; padding: 40px; border: 1px solid #1E262B; border-radius: 20px; background: #11161a;">
            <i class="ri-checkbox-circle-line" style="font-size: 4rem; color: #10b981; margin-bottom: 20px;"></i>
            <h2 style="font-family: 'Montserrat', sans-serif; font-size: 1.8rem; margin-bottom: 10px;">¡Pre-afiliación Exitosa!</h2>
            <p style="color: #94a3b8; line-height: 1.6; margin-bottom: 30px;">
                Tu cuenta ha sido creada correctamente. Ahora estás en <b>proceso de validación</b> por parte de la Junta Directiva.
                <br><br>
                Te notificaremos cuando tu acceso sea aprobado.
            </p>
            <div style="font-size: 0.9rem; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-bottom: 30px;">
                Estado: <span style="color: #f59e0b; font-weight: bold;">⏳ Pendiente de Aprobación</span>
            </div>
            <button id="btn-logout-pending" class="search-btn" style="width: 100%; gap: 10px;">
                <i class="ri-logout-box-line"></i> Cerrar Sesión y Volver Luego
            </button>
        </div>
    </div>

    <!-- ================================================================= -->
    <!-- VISTA 2: DASHBOARD (ID: view-dashboard) - LIMPIO Y NATIVO         -->
    <!-- ================================================================= -->
    <div id="view-dashboard" class="hidden-view">
        
        <!-- HEADER (Estructura Flex Nativ) -->
        <header class="custom-header">
            <!-- Izquierda: Logo -->
            <div class="header-left">
                <img src="./assets/img/logo.png" alt="Logo" class="brand-logo">
                <div class="brand__text">
                    <h1 class="brand__title">HUMANA</h1>
                    <h2 class="brand__subtitle">
                        <span>D</span><span>I</span><span>G</span><span>I</span><span>T</span><span>A</span><span>L</span>
                    </h2>
                </div>
            </div>

            <!-- Derecha: Botones -->
            <div class="header-right">
                <button class="search-btn" type="button" aria-label="Buscar">
                    <i class="ri-search-line" style="font-size: 1.2rem;"></i>
                </button>
                <button id="btn-logout" class="logout-btn" title="Cerrar Sesión">
                    <i class="ri-logout-box-line" style="font-size: 1.2rem;"></i>
                </button>
            </div>
        </header>

        <!-- LAYOUT PRINCIPAL -->
        <main class="humana-main">
            
            <!-- SIDEBAR -->
            <aside class="humana-aside">
                <!-- Info Usuario -->
                <div class="aside-header">
                    <span class="aside-chip" id="user-role-display">ROL</span>
                    <span class="user-email" id="user-email-display">Cargando...</span>
                </div>

                <!-- Menú -->
                <nav class="menu-list">
                    <a href="#" class="menu-item active" data-target="home">
                        <span class="menu-icon"><i class="ri-home-5-line"></i></span>
                        <span>Inicio</span>
                    </a>
                    <a href="#" class="menu-item" data-target="directiva">
                        <span class="menu-icon"><i class="ri-vip-crown-line"></i></span>
                        <span>Directiva</span>
                    </a>
                    
                    <!-- MENÚ DESPLEGABLE DE LIBROS -->
<div class="menu-item-group">
    <!-- Botón Principal (Disparador) -->
    <div class="menu-item" id="btn-toggle-libros" style="cursor: pointer; justify-content: space-between;">
        <div style="display: flex; gap: 12px; align-items: center;">
            <span class="menu-icon"><i class="ri-book-shelf-line"></i></span>
            <span>Libros JAC</span>
        </div>
        <i class="ri-arrow-down-s-line" id="icon-arrow-libros" style="transition: transform 0.3s;"></i>
    </div>

    <!-- Submenú (Oculto por defecto) -->
    <div id="submenu-libros" style="display: none; flex-direction: column; gap: 5px; padding-left: 20px; margin-top: 5px; border-left: 1px solid var(--border-color);">
        
        <a href="#" class="menu-item" data-target="libro-actas" style="font-size: 0.9em;">
            <i class="ri-file-list-3-line"></i> Actas
        </a>
        <a href="#" class="menu-item" data-target="libro-afiliados" style="font-size: 0.9em;">
            <i class="ri-group-line"></i> Afiliados
        </a>
        <a href="#" class="menu-item" data-target="libro-contable" style="font-size: 0.9em;">
            <i class="ri-money-dollar-circle-line"></i> Contable
        </a>
        <a href="#" class="menu-item" data-target="libro-inventario" style="font-size: 0.9em;">
            <i class="ri-archive-line"></i> Inventario
        </a>
        <a href="#" class="menu-item" data-target="libro-convivencia" style="font-size: 0.9em;">
            <i class="ri-scales-line"></i> Convivencia
        </a>

    </div>
</div>

                    <a href="#" class="menu-item" data-target="bandeja">
                        <span class="menu-icon"><i class="ri-mail-line"></i></span>
                        <span>Bandeja</span>
                        <span id="badge-mensajes" class="menu-badge hidden-view">0</span>
                    </a>

                    <div class="aside-section-title">ADMINISTRACIÓN</div>
                    
                    <a href="#" class="menu-item" data-target="tramites">
                        <span class="menu-icon"><i class="ri-run-line"></i></span>
                        <span>Trámites</span>
                    </a>
                    <!-- tarjetas de estatutos y documentos -->
                     <a href="#" class="menu-item" data-target="estatutos">
                        <span class="menu-icon"><i class="ri-file-list-3-line"></i></span>
                        <span>Estatutos</span>
                     </a>
                        <a href="#" class="menu-item" data-target="documentos">
                            <span class="menu-icon"><i class="ri-folder-3-line"></i></span>
                            <span>Documentos</span>
                        </a>
                    <div class="aside-section-title">Tecnología avanzadas</div>
                    <!-- voto electrónico -->
                    <a href="#" class="menu-item" data-target="voto-electronico">
                        <span class="menu-icon"><i class="ri-checkbox-multiple-line"></i></span>
                        <span>Voto Electrónico</span>
                    </a>
                    <!-- Sala de conferencias -->
                    <a href="#" class="menu-item" data-target="sala-conferencias">
                        <span class="menu-icon"><i class="ri-video-line"></i></span>
                        <span>Sala de Conferencias</span>
                    </a>
                 <!-- UBI -->
                    <a href="#" class="menu-item" data-target="ubi">
                        <span class="menu-icon"><i class="ri-map-pin-line"></i></span>
                        <span>UBI</span>
                    </a>
                    <!-- Donación -->
                    <a href="#" class="menu-item" data-target="donacion">
                        <span class="menu-icon"><i class="ri-heart-line"></i></span>
                        <span>Donación</span>
                    </a>
                   <div class="aside-section-title">Privado</div>
                   <!-- proyectos -->
                    <a href="#" class="menu-item" data-target="proyectos">
                        <span class="menu-icon"><i class="ri-folder-4-line"></i></span>
                        <span>Proyectos</span>
                    </a>
                    <!-- Agenda / Calendario -->
                    <a href="#" class="menu-item" data-target="agenda">
                        <span class="menu-icon"><i class="ri-calendar-line"></i></span>
                        <span>Agenda</span>
                    </a>
                    <!-- Notas -->
                    <a href="#" class="menu-item" data-target="notas">
                        <span class="menu-icon"><i class="ri-notification-line"></i></span>
                        <span>Notas</span>
                    </a>
                </nav>
            </aside>
            
            <!-- CONTENIDO CENTRAL -->
            <!-- DENTRO DE TU <main class="humana-main"> -->
<section id="topContent" class="top-content">
    
    <!-- ========================================== -->
    <!-- VISTA A: INICIO / HOME (Lo que ya tenías)  -->
    <!-- ========================================== -->
    <div id="section-home">
        
        <!-- Tarjeta Superior -->
        <div class="portada">
            <div class="portada-info">
                <span class="aside-chip" style="margin-right: 8px;">HUMANA</span> Políticas Digitales
            </div>
            <div>
                <button class="btn-editar">EDITAR</button>
                <span class="cyber" style="margin-left: 10px; font-weight: bold;">LOGO JAC</span>
            </div>
        </div>

        <!-- Info Bar -->
        <div class="info-bar">
            <div>
                <div>UUID: <span id="jac-uuid">Cargando...</span></div>
                <div>DID: <b style="color: #fff;" id="jac-did">...</b></div>
            </div>
            <div style="text-align: right;">
                <div>NIT: <span id="jac-nit">...</span></div>
                <div id="jac-lugar">...</div>
            </div>
        </div>

        <!-- Hero Text -->
        <h1 class="hero-title" id="jac-nombre">Cargando JAC...</h1>
        <h2 class="hero-subtitle" id="jac-lema">...</h2>
        <p class="hero-desc" id="jac-desc">Cargando descripción...</p>

        <!-- Video -->
        <div class="video-wrapper">
            <div class="video-container">
                <iframe id="jac-video" src="" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>

    </div> <!-- FIN DE SECTION HOME -->


    <!-- ========================================== -->
    <!-- VISTA B: DIRECTIVA (Oculta por defecto)    -->
    <!-- ========================================== -->
    <div id="section-directiva" class="hidden-view">

        <!-- DENTRO DE id="section-directiva" -->

<header class="council-header">
    <div>
        <h1 id="dir-titulo">Gobierno JAC</h1>
        <p class="council-header__subtitle">Directiva, comités de trabajo y delegados</p>
    </div>
    <div style="text-align:right;">
        <span style="color:#aaa; font-size:0.8rem; display:block;">VIGENCIA</span>
        <span class="badge badge-active" style="background:#1e262b; border-color:#333;">2024 - 2028</span>
    </div>
</header>

<!-- IMPORTANTE: ESTE ES EL ID QUE BUSCA EL CÓDIGO JS -->
<div id="grid-gobierno" class="gov-grid">
    <!-- Aquí aparecerán las tarjetas -->
    <div style="color:white;">Esperando datos...</div>
</div>
    
    </div> <!-- FIN DE SECTION DIRECTIVA -->
    <!-- VISTA C: VISOR DE LIBROS (Genérico) -->
<div id="section-libros" class="hidden-view">
    
    <header class="council-header">
        <div>
            <!-- Título dinámico (cambiará según el libro) -->
            <h1 id="libro-titulo">Libro JAC</h1>
            <p class="council-header__subtitle" id="libro-subtitulo">Registro oficial de la comunidad</p>
        </div>
        <div>
            <!-- Botón para agregar registros (Solo admins) -->
            <button id="btn-nuevo-registro" class="search-btn" style="display: none; width:auto; padding:0 20px; gap:10px;">
                <i class="ri-add-line"></i> Nuevo Registro
            </button>
        </div>
    </header>
    <div id="header-actas-extra" style="display: none; margin-bottom: 20px;"></div>
    <!-- TABLA GENÉRICA -->
    <section class="council-section">
        <div class="council-table">
            <table id="tabla-libros">
                <!-- El encabezado (thead) y cuerpo (tbody) se inyectan con JS -->
                <thead id="libro-thead"></thead>
                <tbody id="libro-tbody"></tbody>
            </table>
        </div>
    </section>

</div>
<!-- VISTA D: BANDEJA DE ENTRADA -->
<div id="section-bandeja" class="hidden-view">
    
    <header class="council-header">
        <div>
            <h1>Comunicación</h1>
            <p class="council-header__subtitle">Canal oficial Vecino ↔ Directiva</p>
        </div>
        <!-- Botón para crear nuevo mensaje -->
        <button class="search-btn" id="btn-redactar" style="width:auto; padding:0 20px; gap:10px;">
            <i class="ri-edit-line"></i> Redactar
        </button>
    </header>

    <div class="inbox-layout">
        
        <!-- COLUMNA IZQUIERDA: LISTA DE MENSAJES -->
        <aside class="inbox-list">
            <!-- Aquí se inyectarán los mensajes con JS -->
            <div id="lista-mensajes">
                <div style="padding: 20px; text-align: center; color: gray;">Cargando...</div>
            </div>
        </aside>

        <!-- COLUMNA DERECHA: LECTURA Y ESCRITURA -->
        <main class="inbox-content" style="background: #11161a; border: 1px solid var(--border-color); border-radius: 12px; padding: 25px;">
            
            <!-- ESTADO 1: NADA SELECCIONADO (Visible por defecto) -->
            <div id="inbox-vacio" style="height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0.5;">
                <i class="ri-mail-send-line" style="font-size: 4rem; margin-bottom: 10px;"></i>
                <p>Selecciona un mensaje o redacta uno nuevo</p>
            </div>

            <!-- ESTADO 2: LEYENDO MENSAJE (Oculto) -->
            <div id="inbox-lectura" class="hidden-view">
                <!-- ENCABEZADO DEL MENSAJE -->
<div class="msg-detail-header">
    <!-- El JS llenará el avatar aquí -->
    <div id="msg-avatar-container" class="msg-avatar">--</div>
    
    <div class="msg-meta">
        <!-- Asunto Grande -->
        <h3 id="msg-asunto" style="font-size: 1.3rem; margin-bottom: 5px; color: var(--cyber-blue);">Asunto...</h3>
        
        <!-- Nombre -->
        <div style="color: white; font-weight: 600; margin-bottom: 2px;" id="msg-nombre-completo">Nombre del Vecino</div>
        
        <!-- Correo y Fecha -->
        <p>
            <span id="msg-email">correo@ejemplo.com</span> &bull; 
            <span id="msg-fecha">Fecha</span>
        </p>
    </div>
</div>
                <div id="msg-cuerpo" style="line-height: 1.6; color: var(--text-main);">
                    <!-- Contenido del mensaje -->
                </div>
                <!-- ZONA DE RESPUESTAS -->
                <div id="zona-respuestas" style="margin-top: 30px;">
                    
                    <!-- CASO A: YA HAY RESPUESTA (Se muestra esto) -->
                    <div id="visualizar-respuesta" class="admin-response-card hidden-view">
                        <div class="response-header">
                            <span>Respuesta Oficial</span>
                            <span id="resp-fecha">...</span>
                        </div>
                        <p id="resp-texto" style="color: #e2e8f0; line-height: 1.5;">...</p>
                    </div>

                    <!-- CASO B: NO HAY RESPUESTA Y SOY ADMIN (Se muestra formulario) -->
                    <div id="formulario-respuesta" class="reply-area hidden-view">
                        <h4><i class="ri-reply-line"></i> Escribir respuesta al vecino:</h4>
                        <textarea id="txt-respuesta-admin" class="inbox-input" rows="4" placeholder="Escribe la solución o respuesta oficial aquí..."></textarea>
                        <button id="btn-enviar-respuesta" class="form-submit" style="width: auto; background: #10b981;">
                            <i class="ri-send-plane-fill"></i> Enviar Respuesta
                        </button>
                    </div>
                </div>
            </div>

            <!-- ESTADO 3: ESCRIBIENDO NUEVO (Oculto) -->
            <div id="inbox-escritura" class="hidden-view">
                <h2 style="margin-bottom: 20px; color: white;">Nueva Solicitud</h2>
                <form id="form-mensaje">
                    <input type="text" id="new-asunto" placeholder="Asunto (Ej: Mantenimiento Parque)" class="inbox-input" required>
                    
                    <select id="new-destinatario" class="inbox-input">
                        <option value="admin">A: Junta Directiva</option>
                        <option value="tesoreria">A: Tesorería</option>
                        <option value="convivencia">A: Comité de Convivencia</option>
                    </select>

                    <textarea id="new-cuerpo" rows="8" placeholder="Describe tu solicitud detalladamente..." class="inbox-input" style="resize: none;" required></textarea>
                    
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" class="form-submit" style="width: auto;">Enviar Solicitud</button>
                        <button type="button" class="form-submit secondary-btn" id="btn-cancelar-msg" style="width: auto;">Cancelar</button>
                    </div>
                </form>
            </div>

        </main>
    </div>

</div>

    <!-- FOOTER COMÚN -->
    <footer class="site-footer">
        <p>©2025 Humana Políticas Digitales. Todos los derechos reservados.</p>
    </footer>

</section>
        </main>
    </div>
    <!-- ================================================================= -->
<!-- VISTA 3: REGISTRO COMPLETO (AFILIACIÓN)                           -->
<!-- ================================================================= -->
<main id="view-register" class="hidden-view" style="width: 100%; min-height: 100vh; background: #04080b;">
    
    <div class="register-container">
        <!-- Cabecera del Formulario -->
        <header class="register-header">
            <img src="./assets/img/logo.png" alt="Humana" style="height: 60px;">
            <div>
                <h2 style="color:white; margin:0;">Afiliación Digital</h2>
                <p style="color:var(--text-muted); margin:0;">Registro Único Comunal y de Afiliados (RUCA)</p>
            </div>
        </header>

        <form id="form-register-full" class="register-grid">
            
            <!-- SECCIÓN 1: DATOS DE LA CUENTA -->
            <div class="form-section-title">1. Datos de Acceso</div>
            
            <div class="form-group">
                <label>Correo Electrónico *</label>
                <input type="email" id="reg-email" required placeholder="tu@correo.com">
            </div>
            
            <div class="form-group">
                <label>Contraseña *</label>
                <input type="password" id="reg-pass" required placeholder="Mínimo 6 caracteres">
            </div>

            <!-- SECCIÓN 2: IDENTIFICACIÓN PERSONAL -->
            <div class="form-section-title">2. Identificación del Afiliado</div>

            <div class="form-row">
                <div class="form-group">
                    <label>Nombres *</label>
                    <input type="text" id="reg-nombres" required>
                </div>
                <div class="form-group">
                    <label>Apellidos *</label>
                    <input type="text" id="reg-apellidos" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Tipo Documento *</label>
                    <select id="reg-tipo-doc" required>
                        <option value="CC">Cédula de Ciudadanía</option>
                        <option value="TI">Tarjeta de Identidad</option>
                        <option value="CE">Cédula de Extranjería</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Número Documento *</label>
                    <input type="number" id="reg-num-doc" required>
                </div>
                <div class="form-group">
        <label>Fecha de Nacimiento * (Mayores de 14 años)</label>
        <input type="date" id="reg-fecha-nac" required>
    </div>
    
    <!-- NUEVO CAMPO: GÉNERO -->
    <div class="form-group">
        <label>Género *</label>
        <select id="reg-genero" required>
            <option value="" disabled selected>Seleccione...</option>
            <option value="Hombre">Hombre</option>
            <option value="Mujer">Mujer</option>
            <option value="Prefiero no responder">Prefiero no responder</option>
        </select>
    </div>
            </div>
            <!-- SECCIÓN 3: UBICACIÓN Y CONTACTO -->
            <div class="form-section-title">3. Residencia y Contacto</div>

            <div class="form-group">
                <label>Selecciona tu Comunidad (JAC) *</label>
                <select id="reg-jac" required>
                    <option value="" disabled selected>-- Cargando Juntas... --</option>
                </select>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Dirección / Vereda / Sector *</label>
                    <input type="text" id="reg-direccion" required placeholder="Ej: Vereda El Río, Finca La Esperanza">
                </div>
                <div class="form-group">
                    <label>Celular / WhatsApp *</label>
                    <input type="tel" id="reg-telefono" required>
                </div>
            </div>

            <!-- SECCIÓN 4: INTERÉS COMUNITARIO -->
            <div class="form-section-title">4. Participación</div>
            
            <div class="form-group">
    <label>Comisión de Trabajo o Rol *</label>
    <p style="font-size:0.8rem; color:#6b7280; margin-bottom:5px;">¿En qué área te gustaría apoyar? Si no sabes, elige Asamblea.</p>
    <select id="reg-comision" required>
        <!-- NUEVA OPCIÓN DEFAULT -->
        <option value="Asamblea General">Asamblea General (Afiliado Base)</option>
        
        <option value="Obras e Infraestructura">Obras e Infraestructura</option>
        <option value="Salud y Medio Ambiente">Salud y Medio Ambiente</option>
        <option value="Deportes y Cultura">Deportes y Cultura</option>
        <option value="Seguridad y Convivencia">Seguridad y Convivencia</option>
        <option value="Empresarial y Emprendimiento">Empresarial y Emprendimiento</option>
    </select>
</div>

            <!-- BOTONES -->
            <div class="form-actions">
                <button type="button" id="btn-cancelar-registro" class="secondary-btn">Cancelar</button>
                <button type="submit" class="form-submit">Finalizar Afiliación</button>
            </div>

        </form>
    </div>
</main>
    <!-- ========================================== -->
    <!-- MODAL UNIVERSAL DE REGISTRO                -->
    <!-- ========================================== -->
    <div id="modal-registro" class="modal-overlay hidden-view">
        <div class="modal-content pro-modal">
            
            <!-- HEADER FIJO -->
            <header class="modal-header">
                <div style="display:flex; align-items:center; gap:10px;">
                    <i class="ri-file-add-line" style="color:var(--cyber-blue); font-size:1.2rem;"></i>
                    <h2 id="modal-titulo-texto" style="font-size:1.1rem; margin:0;">Nuevo Registro</h2>
                </div>
                <button id="btn-cerrar-modal" class="close-btn">&times;</button>
            </header>
            
            <!-- CUERPO SCROLLABLE -->
            <div class="modal-body-scroll">
                <form id="form-modal-dinamico">
                    <!-- Aquí JS inyectará los inputs en GRID -->
                    <div id="modal-campos-container" class="form-grid-layout"></div>
                </form>
            </div>

            <!-- FOOTER FIJO -->
            <footer class="modal-footer">
                <button type="button" id="btn-cancelar-gen" class="secondary-btn" style="width:auto;">Cancelar</button>
                <button type="submit" form="form-modal-dinamico" class="form-submit" style="width:auto; margin:0;">Guardar Datos</button>
            </footer>

        </div>
    </div>
    <!-- ========================================== -->
<!-- MODAL ESPECIAL: NUEVA ACTA (DETALLADO)     -->
<!-- ========================================== -->
<div id="modal-acta" class="modal-overlay hidden-view">
    <div class="modal-content" style="max-width: 900px; height: 90vh; display: flex; flex-direction: column; padding: 0;">
        
        <!-- Header Fijo -->
        <header class="modal-header" style="padding: 20px 30px; background: #0b0f13; margin: 0;">
            <div>
                <h2 style="margin:0; font-size: 1.2rem;">Nueva Acta de Sesión</h2>
                <p style="color:var(--text-muted); font-size:0.8rem; margin:0;">Diligencia la información oficial de la asamblea.</p>
            </div>
            <button id="btn-cerrar-acta" style="background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>
        </header>

        <!-- Cuerpo Scrollable -->
        <div style="flex: 1; overflow-y: auto; padding: 30px;">
            <form id="form-acta-completa">
                
                <!-- 1. DATOS GENERALES -->
                <div class="acta-section">
                    <div class="section-title"><span class="step-badge">1</span> Datos Generales</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Acta Nº</label>
                            <input type="text" id="acta-num" placeholder="Ej: ACT-0045" required>
                        </div>
                        <div class="form-group">
                            <label>Tipo de Reunión</label>
                            <select id="acta-tipo">
                                <option>Ordinaria</option>
                                <option>Extraordinaria</option>
                                <option>Informativa</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Lugar</label>
                            <input type="text" id="acta-lugar"  placeholder="Ej: Salón Comunal" required>
                        </div>
                        <div class="form-group">
                            <label>Código UUID</label>
                            <input type="text" id="acta-uuid" readonly style="opacity: 0.5; cursor: not-allowed;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group"><label>Fecha</label><input type="date" id="acta-fecha" required></div>
                        <div class="form-group"><label>Hora Inicio</label><input type="time" id="acta-inicio" required></div>
                        <div class="form-group"><label>Hora Cierre</label><input type="time" id="acta-fin" required></div>
                        <div class="form-group"><label>Convocatoria</label><input type="text" id="acta-convocatoria" placeholder="Ej: Circular 001"></div>
                    </div>
                </div>

                <!-- 2. QUÓRUM -->
                <div class="acta-section">
                    <div class="section-title"><span class="step-badge">2</span> Verificación del Quórum</div>
                    <div class="form-row" style="grid-template-columns: 1fr 1fr 2fr;">
                        <div class="form-group"><label>Total Hábiles</label><input type="number" id="acta-habiles"></div>
                        <div class="form-group"><label>Asistentes</label><input type="number" id="acta-asistentes"></div>
                        <div class="form-group">
                            <label>Resultado</label>
                            <select id="acta-quorum-res">
                                <option value="Válido">Quórum Válido</option>
                                <option value="Insuficiente">Insuficiente (Se levanta sesión)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 3. ORDEN DEL DÍA -->
                <div class="acta-section">
                    <div class="section-title"><span class="step-badge">3</span> Orden del día</div>
                    <div class="form-group" style="gap: 10px;">
                        <input type="text" class="input-orden" placeholder="1. Verificación del quórum">
                        <input type="text" class="input-orden" placeholder="2. Lectura acta anterior">
                        <input type="text" class="input-orden" placeholder="3. ...">
                        <input type="text" class="input-orden" placeholder="4. ...">
                    </div>
                </div>

                <!-- 4. DESARROLLO -->
                <div class="acta-section">
                    <div class="section-title"><span class="step-badge">4</span> Desarrollo de la sesión</div>
                    <textarea id="acta-desarrollo" rows="6" class="inbox-input" placeholder="Resumen de intervenciones y avances..."></textarea>
                </div>

                <!-- 5. ACUERDOS -->
                <div class="acta-section">
                    <div class="section-title"><span class="step-badge">5</span> Decisiones y Acuerdos</div>
                    
                    <!-- Acuerdo 1 -->
                    <div style="background: rgba(255,255,255,0.03); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                        <h4 style="margin:0 0 10px 0; color:var(--cyber-blue); font-size:0.8rem;">ACUERDO 1</h4>
                        <div class="form-group"><input type="text" id="acuerdo-1-desc" placeholder="Descripción del acuerdo"></div>
                        <div class="form-row" style="margin-top:10px;">
                            <div class="form-group"><input type="text" id="acuerdo-1-resp" placeholder="Responsable"></div>
                            <div class="form-group"><input type="date" id="acuerdo-1-plazo"></div>
                        </div>
                    </div>

                    <!-- Acuerdo 2 -->
                    <div style="background: rgba(255,255,255,0.03); padding: 15px; border-radius: 10px;">
                        <h4 style="margin:0 0 10px 0; color:var(--cyber-blue); font-size:0.8rem;">ACUERDO 2 (Opcional)</h4>
                        <div class="form-group"><input type="text" id="acuerdo-2-desc" placeholder="Descripción del acuerdo"></div>
                        <div class="form-row" style="margin-top:10px;">
                            <div class="form-group"><input type="text" id="acuerdo-2-resp" placeholder="Responsable"></div>
                            <div class="form-group"><input type="date" id="acuerdo-2-plazo"></div>
                        </div>
                    </div>
                </div>

                <!-- 6. CIERRE Y FIRMAS -->
                <div class="acta-section">
                    <div class="section-title"><span class="step-badge">6</span> Cierre y Firmas</div>
                    <div class="form-group">
                        <textarea id="acta-cierre-texto" rows="2" class="inbox-input" placeholder="Siendo las HH:MM del DD/MM/AAAA se cierra la sesión."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Presidente(a)</label>
                            <select id="acta-presidente"><option>Cargando...</option></select>
                        </div>
                        <div class="form-group">
                            <label>Secretario(a)</label>
                            <select id="acta-secretario"><option>Cargando...</option></select>
                        </div>
                    </div>
                </div>

            </form>
        </div>

        <!-- Footer Fijo -->
        <footer style="padding: 20px 30px; background: #0b0f13; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: 15px;">
            <button id="btn-cancelar-acta" class="secondary-btn" style="width: auto; padding: 0 30px;">Cancelar</button>
            <button id="btn-guardar-acta" class="form-submit" style="width: auto; padding: 0 30px; margin:0; background: var(--turquesa);">Guardar Acta</button>
        </footer>

    </div>
</div>
<!-- ========================================== -->
<!-- MODAL VISOR DE ACTA (SOLO LECTURA)         -->
<!-- ========================================== -->
<div id="modal-visor-acta" class="modal-overlay hidden-view">

<div class="modal-content" style="max-width: 850px; height: 95vh; padding: 0; background: #0b0f13; display: flex; flex-direction: column;">
    
    <!-- BARRA SUPERIOR DE HERRAMIENTAS -->
    <div style="padding: 15px 25px; border-bottom: 1px solid #1E262B; background: #161d22; display: flex; justify-content: space-between; align-items: center;">
        <h3 style="margin:0; font-size: 0.9rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px;">
            <i class="ri-file-shield-line" style="color: var(--cyber-blue);"></i> Documento Oficial
        </h3>
        <div style="display: flex; gap: 10px;">
            <button class="secondary-btn" style="padding: 5px 15px; font-size: 0.8rem; border-radius: 8px;">
                <i class="ri-printer-line"></i> Imprimir
            </button>
            <button id="btn-cerrar-visor" style="background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>
        </div>
    </div>

    <!-- CUERPO DEL DOCUMENTO (SCROLL) -->
    <div style="flex: 1; overflow-y: auto; padding: 40px; background-color: #080a0c; display: flex; justify-content: center;">
        
        <!-- LA HOJA DIGITAL -->
        <div class="acta-sheet">
            
            <!-- 1. ENCABEZADO -->
            <header class="sheet-header">
                <div class="sheet-brand">
                    <h1 class="sheet-title">ACTA DE REUNIÓN</h1>
                    <p class="sheet-subtitle" id="visor-tipo">ASAMBLEA ORDINARIA</p>
                </div>
                <div class="sheet-meta">
                    <div class="meta-box">
                        <span class="meta-label">FOLIO / ACTA</span>
                        <span class="meta-value" id="visor-numero" style="color: var(--cyber-blue);">---</span>
                    </div>
                    <div class="meta-box">
                        <span class="meta-label">ESTADO</span>
                        <span class="meta-value" id="visor-estado-badge">---</span>
                    </div>
                </div>
            </header>

            <!-- 2. BARRA DE DATOS TÉCNICOS -->
            <div class="sheet-info-grid">
                <div>
                    <span class="info-label">FECHA Y HORA</span>
                    <p id="visor-fecha-hora">---</p>
                </div>
                <div>
                    <span class="info-label">LUGAR</span>
                    <p id="visor-lugar">---</p>
                </div>
                <div style="grid-column: span 2;">
                    <span class="info-label">CÓDIGO DE VERIFICACIÓN (UUID)</span>
                    <p id="visor-uuid" style="font-family: monospace; color: var(--text-muted);">---</p>
                </div>
            </div>

            <hr class="sheet-divider">

            <!-- 3. CUERPO DEL ACTA -->
            <div class="sheet-body">
                
                <!-- SECCIÓN QUORUM -->
                <div class="sheet-section">
                    <h4 class="section-heading"><i class="ri-group-line"></i> 1. Verificación del Quórum</h4>
                    <div class="quorum-box">
                        <div class="quorum-stat">
                            <span>Hábiles</span>
                            <strong id="visor-habiles">0</strong>
                        </div>
                        <div class="quorum-stat">
                            <span>Asistentes</span>
                            <strong id="visor-asistentes">0</strong>
                        </div>
                        <div class="quorum-result" id="visor-quorum-res">
                            ---
                        </div>
                    </div>
                </div>

                <!-- SECCIÓN ORDEN DEL DÍA -->
                <div class="sheet-section">
                    <h4 class="section-heading"><i class="ri-list-check"></i> 2. Orden del Día</h4>
                    <ul id="visor-orden" class="sheet-list">
                        <!-- JS -->
                    </ul>
                </div>

                <!-- SECCIÓN DESARROLLO -->
                <div class="sheet-section">
                    <h4 class="section-heading"><i class="ri-article-line"></i> 3. Desarrollo de la Sesión</h4>
                    <p id="visor-desarrollo" class="text-justified">...</p>
                </div>

                <!-- SECCIÓN ACUERDOS (VISUALMENTE DESTACADOS) -->
                <div class="sheet-section">
                    <h4 class="section-heading"><i class="ri-shake-hands-line"></i> 4. Decisiones y Acuerdos</h4>
                    <div id="visor-acuerdos-container" class="acuerdos-grid">
                        <!-- JS -->
                    </div>
                </div>

                <!-- CIERRE -->
                <div class="sheet-footer-text">
                    <p id="visor-cierre">...</p>
                </div>

                <!-- FIRMAS -->
                <div class="firmas-grid">
                    <div class="firma-box">
                        <div class="firma-line"></div>
                        <strong id="visor-firma-presi">NOMBRE PRESIDENTE</strong>
                        <span>Presidente(a)</span>
                    </div>
                    <div class="firma-box">
                        <div class="firma-line"></div>
                        <strong id="visor-firma-secre">NOMBRE SECRETARIO</strong>
                        <span>Secretario(a)</span>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
</div>
    <!-- LÓGICA DE JAVASCRIPT -->
    <script type="module" src="js/firebase.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/app.js"></script>

</body>
</html>